## 第8章 设计原则
### 一、内聚
一、内聚是指模块元素忠于模块的**职责**  

二、内聚可分为7类

- **偶然内聚**是内聚性最差的.例如在开发时的utils模块,里面存的通用方法没有多太关联
- **逻辑内聚**是逻辑上比较宽泛的类别.例如将键盘归为输入类,显示器归为输出类 
- **时间内聚**是元素在时间是相近的.例如异常处理操作,释放*打开文件*,*连接*,*申请内存*等资源
- **过程内聚**是元素必须按照固定过程处理.例如文件的读写文件操作
- **信息内聚**是元素操作相同的数据.例如增,删,改,查操作
- **顺序内聚**是某些元素输出是另外元素的输入.就像流水线上的操作
- **功能内聚**是这些元素都是为了完成同一个单一任务.例如解析xml文档

### 二、耦合
一、耦合是指**模块**的**依赖**程度.*模块*是统称指得是函数,类,包,子模块,子系统有大有小罢了.*依赖*指某个模块用到另外一个模块的**元素**,同样元素可大可小,有成员变量,函数,类静态变量等

二、耦合可分为8类

- **无耦合**并非是最好的,意味着它没有任何依赖,虽不受其它模块影响,但也失去重用其它模块的机.每个轮子都要自已发明,效率低下.例如有一个学生管理类,方法里要实现操作数据库的DAL,又要实现操作日志的Logger方法,**职责不单一**
- **消息耦合**这里的消息随着模块的不同而不一样,系统级交互接口http,类一级,A类使用B类某个方法
- **数据结构耦合**A模块调用B模块,需要传递*消息* + *数据结构参数*
- **控制耦合**一个模块可以通过某种方式来控制另一个模块的行为.例如工厂类通过一个控制参数来控制函数的处理**流程**或**输出**
- **外部耦合**两个模块依赖相同外部数据格式,通信协议,设备接口.例如操作系统与外设关系
- **全局耦合**当两个模块共享相同的全局数据.例如c++全局变量,java中的单例变量
- **内容耦合**是最差的耦合方式,指当一个模块依赖另一个模块的内部内容.例类A直接操作类B的成员变量,当类B要修改时,类A也要修改

### 三、高内聚低耦合
无论是**低内聚**还是**高耦合**,本质都是**不稳定**.不稳定会带来工作量、带来风险、这不我们所希望看到的,所以我们应该做到**高内聚,低耦合**

### 四、类设计原则
- 单一职责(SRP)只做一件事,这个事又包含很多小事
- 开闭原则(OCP)对使用者修改关闭,对提供者扩展开放
- 里氏替换原则(LSP)子类必须能替换成它们的父类
- 接口隔离原则(ISP)客户端不应该被强迫去依赖它们并不需要的接口
- 依赖反转原则(DIP)1.高层模块不应该直接依赖低层模块,两者都应该依赖抽象层. 2.抽像不能依赖细节,细节必须依赖抽象
